# TableSO: 당신의 올인원 데이터 관리 도구 🛠️

TableSO는 유니티에서 **ScriptableObject**를 기반으로 구조화된 데이터와 테이블을 자동으로 생성하고 관리하는 강력한 툴입니다. `.csv` 파일, 폴더, 그리고 다른 테이블을 손쉽게 처리하여 게임 데이터를 효율적으로 관리할 수 있도록 도와줍니다.

## 🧐 의존성

TableSO는 에셋과 CSV를 원활하게 처리하기 위해 다음을 사용합니다.

* **Addressables**: CSV와 에셋을 해결하고 관리하는 데 필수적입니다.

---

## 🗺️ 작동 방식

### 1. TableEditor

**TableEditor**는 모든 테이블을 관리하는 중앙 허브입니다. 다음 방법으로 열 수 있습니다.
* **키보드 단축키**: 윈도우에서는 `[CTRL + T]`, 맥에서는 `[CMD + T]`.
* **메뉴 탭**: 유니티 에디터 상단의 `[TableSO]` 탭을 통해 열 수 있습니다.

### 2. TableCenter

**TableCenter**는 모든 테이블의 참조를 관리하는 중앙 저장소 역할을 합니다. `GetTable<T>` 메서드를 사용하여 특정 테이블을 쉽게 가져올 수 있습니다.

---

## 📂 테이블 종류

TableSO는 모든 데이터 요구사항을 충족시키기 위해 세 가지 고유한 테이블 유형을 지원합니다.

### 1. CsvTable

* **구조**: `.csv` 파일을 읽는 `[TKey, TData]` 형태의 테이블입니다. 파일 내용에 따라 `TKey`를 해결하고 `TData`를 생성합니다.
* **CSV 규칙**:
    * **첫 번째 행**: **변수 이름**을 포함해야 합니다. 표준 변수 명명 규칙을 따르세요.
    * **두 번째 행**: **변수 타입**을 포함합니다. `enum`과 `array` 타입을 지원합니다.
    * **배열**: `|`를 사용하여 요소를 구분합니다 (예: `1|2|3`).
* 각 행을 기반으로 `DataClass`가 생성되며, `ID`를 기반으로 `TableClass`가 생성됩니다.

### 2. AssetTable

* **구조**: 폴더에서 데이터를 읽는 `[string, TData]` 형태의 테이블입니다. 파일 이름(`string`)을 `TKey`로 사용하고 `TData`를 생성합니다.
* 읽을 에셋을 필터링하여 지정할 수 있습니다.
* 모든 에셋은 **Addressables**로 저장되며, 게임 시작 시 자동으로 로드됩니다.

### 3. MergeTable

* **구조**: 다른 테이블(`CsvTable`, `AssetTable` 등)을 참조하여 복합적인 데이터를 생성하는 `[TKey, TData]` 형태의 테이블입니다.
* 생성하기 전에 연결할 관련 테이블을 선택할 수 있습니다.
* **사용자가 `TData`를 직접 정의**해야 하며(생성자와 필드 정의), 연결된 테이블에서 데이터를 읽어와 데이터 리스트를 구축하는 `UpdateData()` 메서드의 로직을 직접 구현해야 합니다.

---

## 👩‍💻 사용 예시: 아이템 관리

스프라이트와 아이템 정보를 통해 아이템 시스템을 만든다고 가정해 봅시다. TableSO를 사용하는 방법은 다음과 같습니다.

1.  **`ItemSprite`에 대한 `AssetTable` 생성**: **Sprite 필터**를 사용하여 모든 아이템 스프라이트를 포함합니다.
2.  **`ItemData`에 대한 `CsvTable` 생성**: 이 테이블은 스프라이트 이름을 변수로 포함하여 모든 아이템 정보를 담습니다.
3.  **`Item`에 대한 `MergeTable` 생성**: 이것이 최종적으로 통합된 아이템 클래스가 될 것입니다.
4.  **모든 테이블 새로고침**: TableEditor의 **Center** 탭으로 가서 `RefreshAllTable`을 클릭하여 ScriptableObject를 생성하고 참조를 해결합니다.
5.  **클래스 정의**: 자동으로 생성된 `Item` 클래스에 `ItemData`와 `ItemSprite` 필드를 정의하고 생성자를 구축합니다.
6.  **업데이트 로직 구현**: `ItemMergeTable`에서 `UpdateData` 로직을 구현하여 `ItemSpriteAssetTable`과 `ItemDataCsvTable`의 데이터를 사용하여 `Item` 객체를 구축합니다.
7.  **스크립트에서 접근**: `ItemManager` 스크립트(또는 다른 스크립트)에서 `tableCenter`를 참조합니다.
8.  **테이블 가져오기**: `tableCenter.GetTable<ItemMergeTable>()`을 사용하여 병합된 아이템 테이블을 가져옵니다.
9.  **데이터 검색**: `GetAllKey()`를 사용하여 모든 아이템 키 목록을 가져오고, `GetData(key)`로 특정 `Item` 객체에 접근합니다.

---

## ✨ 주요 장점

* **확장 가능한 ScriptableObject**: SO에 데이터뿐만 아니라 `GetRandomItem()`이나 `GetItemListByType(type)`과 같은 유틸리티 메서드를 추가할 수 있습니다.
* **자동 에셋 등록**: 폴더에 에셋을 추가하기만 하면 자동으로 등록됩니다.
* **원활한 업데이트**: `Update Csv` 기능을 사용하여 테이블 구조나 메서드를 변경하지 않고 `.csv` 파일의 데이터를 수정할 수 있습니다.
* **영구적인 데이터**: 데이터는 한 번 로드되면 씬 변경 시에도 유지되므로 반복 로드가 필요 없습니다.
* **고성능**: 효율적인 **Dictionary 캐싱**을 통해 빠른 검색을 제공합니다.
